angular.module("schemaForm").run(["$templateCache",function(e){e.put("directives/decorators/bootstrap/external-options/external-options.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false, \'float\': form.float === true }"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><select ng-model="form.selectedOption" ng-model-options="form.ngModelOptions" ng-disabled="form.readonly" sf-changed="form" ng-change="changed()" class="form-control" schema-validate="form" external-options="" links="form.schema.links" model="model" form="form" ng-options="item.value as item.name for item in form.options" destroy-hidden-data=""><option ng-show="form.selectedOption" value=""></option></select><div class="help-block" ng-show="(hasError() && errorMessage(schemaError()))" ng-bind-html="(hasError() && errorMessage(schemaError()))"></div></div>')}]),angular.module("schemaForm").directive("externalOptions",function(){return{restrict:"A",require:"ngModel",scope:{form:"=",model:"="},controller:["$scope","$http","$interpolate","$filter","sfSelect",function(e,o,n,r,t){var i,l=e;l.form.options=[],l.currentSource="",l.externalOptions={};var s=function(e,o,n){console.info("processOptions"),console.info(e),console.info(o),console.info(n);var r=[];if(o["enum"]&&o["enum"].length){for(i=0;i<o["enum"].length;i++)o["enum"][i]&&o["enum"][i].length&&r.push({name:o["enum"][i],value:o["enum"][i]});l.form.options=r}else o.titleMap&&(l.form.options=o.titleMap);l.externalOptions[e]!==o&&(l.externalOptions[e]=o),l.$watch("form.selectedOption",function(){t(l.form.key,l.model,l.form.selectedOption)});for(var i=0;i<l.form.options.length;i++)if("undefined"!=typeof l.form.options[i].value&&n===l.form.options[i].value)return l.form.selectedOption=l.form.options[i].value,console.info("scope.form.selectedOption"),void console.info(l.form.selectedOption);console.info("sfSelect "),console.info(l.form.key),console.info(l.model),t(l.form.key,l.model,"null")},a=function(e){if(l.currentSource!==e||"object"!=typeof l.externalOptions[e]){l.currentSource=e;var n=t(l.form.key,l.model);return n=n?n:void 0,e=r("_externalOptionUri")(e),"object"==typeof l.externalOptions[e]?void s(e,l.externalOptions[e],n):void o.get(e,{responseType:"json"}).success(function(o){s(e,o,n)}).error(function(){l.form.options=[],l.form.selectedOption="",t(l.form.key,l.model,l.form.selectedOption)})}};if(l.form.parameters.length)for(var i=0;i<l.form.parameters.length;i++)angular.isDefined(l.form.parameters[i])&&l.$watch(l.form.parameters[i][1],function(e){console.info("newValueA"),console.info(e);var o,t,e=r("_externalOptionUriField")(e);console.info("newValueB"),console.info(e),e?(o=n(l.form.optionSource,!1,null,!0),t=o(l),a(t,l.form.key)):l.form.options=[]});else a(l.form.optionSource)}]}}).filter("_externalOptionUriField",["$injector","$filter",function(e,o){function n(n){return e.has("externalOptionUriFieldFilter")&&(n=o("externalOptionUriField")(n)),n}return n}]).filter("_externalOptionUri",["$injector","$filter",function(e,o){function n(n){return e.has("externalOptionUriFilter")&&(n=o("externalOptionUri")(n)),n}return n}]),angular.module("schemaForm").directive("destroyHiddenData",["sfSelect",function(e){return{link:function(o){var n=!1;o.$on("$destroy",function(){console.info("destroy"),console.info(o),"object"==typeof o.form.preserveOnDestroy&&o.form.preserveOnDestroy.condition?(n=o.evalExpr(o.form.preserveOnDestroy.condition),console.info("preserve"),console.info(o.evalExpr("projectType")),console.info(o.evalExpr(o.form.preserveOnDestroy.condition))):o.form.preserveOnDestroy&&(n=!0),n||(o.form.selectedOption="",e(o.form.key,o.model,o.form.selectedOption))})}}}]),function(e){"use strict";e.module("schemaForm").directive("oyInline",["schemaForm","sfValidator","sfPath","sfSelect",function(o,n,r){return{restrict:"A",require:"ngModel",scope:{oyInline:"=",ngModel:"=",ngModelOptions:"=",model:"=",sfChanged:"=",schemaValidate:"="},link:function(o,n,t,i){console.info("oyInline"),console.info(o),console.info(i);var l=r.stringify(o.schemaValidate.key),s={},a=o.schemaValidate.title||o.schemaValidate.key.join(".")||"";e.copy(o.schemaValidate.schema,s),s.properties&&s.anyOf&&(o.schemaValidate.schema.allowInvalid=!0,delete s.properties),i.$name=a,console.info("key: "+l),i.$options.allowInvalid=!0,o.$watchCollection("model"+l,function(){i.$validate?(i.$validate(),i.$invalid&&(i.$dirty=!0,i.$pristine=!1)):i.$setViewValue(i.$viewValue)}),i.$validators={anyOf:function(){return tv4.validate(o.ngModel,s),tv4.valid}},o.$on("schemaFormValidate",function(){i.$validate?(i.$validate(),i.$invalid&&(i.$dirty=!0,i.$pristine=!1)):i.$setViewValue(i.$viewValue)})}}}])}(window.angular),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(e,o,n){var r,t;t=function(o,t,i){var t=t||{},l="string"===t.type?"string":t.type;if(console.info("stringType1"+typeof l),console.info(l),"Array"==typeof l&&(console.info("stringType2"),console.info(l),l=!!t.type.indexOf("string")),console.info(l),l&&t.links&&"object"==typeof t.links)for(r=0;r<t.links.length;r++)if("options"===t.links[r].rel){var s=/({)([^}]*)(})/gm,a=/{{([^}]*)}}/gm,c=e.stdFormObj(o,t,i);c.key=i.path,c.type="select-external",c.optionSource=t.links[r].href.replace(s,"$1$1 model.$2 | _externalOptionUri $3$3"),c.options=[],c.parameters=[];for(var f=c.optionSource.match(a);null!==(f=a.exec(c.optionSource));)c.parameters.push(f);return i.lookup[n.stringify(i.path)]=c,c}},e.defaults.string.unshift(t),o.addMapping("bootstrapDecorator","select-external","directives/decorators/bootstrap/external-options/external-options.html"),o.createDirective("select-external","directives/decorators/bootstrap/external-options/external-options.html")}]);